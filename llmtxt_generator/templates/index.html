<!-- templates/index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>DSPy llms.txt Generator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2rem; }
        textarea { width: 100%; height: 300px; margin-top: 1rem; font-family: monospace; }
        .error { color: red; }
        .success { color: green; }
        input[type="url"] { padding: 0.5rem; width: 100%; }
        button { padding: 0.5rem 1rem; }
        form { margin-bottom: 1rem; }
    </style>
</head>
<body>
    <h1>DSPy llms.txt Generator</h1>

    <!-- Form for generating llms.txt from repo URL -->
    <form method="post" action="/generate">
        <label for="repo_url">GitHub Repository URL:</label><br>
        <input
            type="url"
            id="repo_url"
            name="repo_url"
            required
            placeholder="https://github.com/stanfordnlp/dspy"
            value="{{ repo_url if repo_url else '' }}"
        ><br><br>
        <button type="submit">Generate llms.txt</button>
    </form>

    {% if error %}
    <p class="error">Error: {{ error }}</p>
    {% endif %}

    {% if result %}
    <h2>Generated llms.txt Content:</h2>

    <!-- Form to save generated llms.txt content -->
    <form method="post" action="/save">
        <textarea name="llms_txt_content" readonly>{{ result }}</textarea><br>
        <!-- Pass repo_url hidden for filename derivation -->
        <input type="hidden" name="repo_url" value="{{ repo_url }}">
        <button type="submit">Save llms.txt</button>
    </form>
    {% endif %}

    {% if saved %}
    <p class="success">{{ message }}</p>
    {% endif %}
</body>
</html>
